{% load i18n%}
<div id="top-navbar" class="bg-white/90 backdrop-blur-md border-b border-sky-green-200/30 shadow-md shadow-sky-green-500/5 py-2">
	<div class="container mx-auto px-4">
		<div class="nav-wrapper flex items-center justify-between">

			<div class="toggle-btn p-2 rounded-lg hover:bg-sky-green-100 transition-all duration-200 cursor-pointer lg:hidden" onclick="toggleSidebar()">
				<i class="fas fa-bars text-sky-green-500 hover:text-sky-green-700 text-sm transition-colors duration-200"></i>
			</div>

			<div class="flex-1 flex justify-center">
				<form class="form-header flex items-center max-w-xl w-full" action="{% url 'query' %}" method="GET">
					<div class="relative w-full">
						<input id="primary-search" 
							class="w-full px-4 py-2.5 bg-white border border-sky-green-200 rounded-xl text-gray-700 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-sky-green-500 focus:border-sky-green-500 transition-all duration-200 pr-12 text-sm" 
							type="text" 
							name="q" 
							value="{{ request.GET.q }}"
							placeholder="{% trans 'Search All... #course, #program, #Quiz, #News, #Events' %}" 
							required />
						<button class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-sky-green-100 hover:bg-sky-green-200 text-sky-green-500 hover:text-sky-green-700 w-8 h-8 rounded-full transition-all duration-200 shadow-sm hover:shadow-md flex items-center justify-center" type="submit">
							<i class="fas fa-search text-sm text-sky-green-500 hover:text-sky-green-700"></i>
						</button>
					</div>
				</form>
			</div>

			<div class="dropdown relative">
				<div class="avatar w-10 h-10 rounded-full border-2 border-sky-green-300 hover:border-sky-green-500 transition-all duration-200 cursor-pointer overflow-hidden shadow-sm hover:shadow-md transform hover:scale-105" 
					type="button" 
					data-bs-toggle="dropdown" 
					aria-expanded="false">
					<img src="{{ request.user.picture.url }}" class="w-full h-full object-cover">
				</div>
				<div class="dropdown-menu absolute right-0 mt-2 w-56 bg-white rounded-xl shadow-xl border border-sky-green-200/30 overflow-hidden z-50" style="min-width: 14rem !important;">
					<div class="p-4 bg-gradient-to-r from-sky-green-50 to-sky-green-100 text-center">
						<div class="w-12 h-12 mx-auto rounded-full border-2 border-white shadow-md overflow-hidden mb-3">
							<img src="{{ request.user.picture.url }}" class="w-full h-full object-cover">
						</div>
						<p class="text-xs text-sky-green-700 font-medium">
							{% trans 'Last login:' %} {{ request.user.last_login|date }}
						</p>
					</div>

					<div class="py-1">
						{% if request.user.is_instructor_examiner or request.user.is_trainee %}
						<a class="dropdown-item flex items-center px-4 py-2.5 text-gray-700 hover:bg-sky-green-50 hover:text-sky-green-700 transition-all duration-200 text-sm" href="{% url 'user_course_list' %}">
							<i class="fas fa-book w-4 h-4 mr-3 text-sky-green-500"></i>{% trans 'My Courses' %}
						</a>
						{% endif %}

						{% if request.user.is_superuser %}
						<a class="dropdown-item flex items-center px-4 py-2.5 text-gray-700 hover:bg-sky-green-50 hover:text-sky-green-700 transition-all duration-200 text-sm" href="{% url 'admin_panel' %}">
							<i class="fas fa-user-tie w-4 h-4 mr-3 text-sky-green-500"></i>{% trans 'Admin Panel' %}
						</a>
						{% endif %}

						<a class="dropdown-item flex items-center px-4 py-2.5 text-gray-700 hover:bg-sky-green-50 hover:text-sky-green-700 transition-all duration-200 text-sm" href="{% url 'profile' %}">
							<i class="fas fa-user w-4 h-4 mr-3 text-sky-green-500"></i>{% trans 'Profile' %}
						</a>
						<a class="dropdown-item flex items-center px-4 py-2.5 text-gray-700 hover:bg-sky-green-50 hover:text-sky-green-700 transition-all duration-200 text-sm" href="{% url 'edit_profile' %}">
							<i class="fas fa-cog w-4 h-4 mr-3 text-sky-green-500"></i>{% trans 'Setting' %}
						</a>
					</div>
					
					<div class="border-t border-sky-green-200/30 p-3">
						<a class="w-full bg-gradient-to-r from-sky-green-600 to-sky-green-700 hover:from-sky-green-700 hover:to-sky-green-800 text-white px-4 py-2 rounded-lg transition-all duration-200 shadow-sm hover:shadow-md flex items-center justify-center font-medium text-sm" href="{% url 'logout' %}">
							<i class="fas fa-sign-out-alt mr-2 text-xs"></i> {% trans 'Signout' %}
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>