{% load static %}
{% load i18n %}

<div id="side-nav" class="bg-gradient-to-b from-white to-sky-green-50 border-r border-sky-green-200/30 shadow-xl shadow-sky-green-500/10">
	<div class="main-menu">
		<div class="top-side text-center py-6 bg-gradient-to-br from-sky-green-500 to-sky-green-600 relative overflow-hidden">
			<div class="absolute inset-0 bg-gradient-to-r from-sky-green-400/20 to-transparent opacity-50"></div>
			<div class="desktop-hide relative z-10">
				<div class="toggle-btn" onclick="toggleSidebar()">
					<i class="fas fa-times text-white hover:text-sky-green-200 transition-colors cursor-pointer"></i>
				</div>
			</div>
			<div class="relative z-10">
				<a href="/" class="block">
					<img src="{% static 'img/brand.svg' %}" width="180px" alt="SkyLearn" class="mx-auto drop-shadow-lg">
				</a>
				<div class="mt-4">
					<span class="inline-block bg-white/20 backdrop-blur-sm text-white font-semibold px-4 py-2 rounded-full text-sm border border-white/30">
						{{ request.user.get_user_role }}
					</span>
				</div>
			</div>
		</div>
		{% url 'home' as hom %} {% url 'dashboard' as dash %} {% url 'profile' as prof %}
		{% url 'lecturer_list' as lec %}
		{% url 'student_list' as stu %} {% url 'course_allocation_view' as cav %}
		{% url 'programs' as pro %} {% url 'session_list' as sess %} {% url 'semester_list' as sem %}
		{% url 'add_score' as ascore %} {% url 'grade_results' as vr %}{% url 'ass_results' as ar %}
		{% url 'course_registration' as cr %} {% url 'edit_profile' as ep %} {% url 'change_password' as cp %}
		{% url 'quiz_progress' as qpr %} {% url 'quiz_marking' as qce %} {% url 'user_course_list' as ucl %}
		{% url 'admin_panel' as admin_p %}
		


		<div class="px-4 py-6">
			<ul class="space-y-2">
				{% if request.user.is_superuser %}
				<li>
					<a href="{% url 'dashboard' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == dash %}bg-white/30 text-white shadow-lg{% endif %}">
						<i class="fas fa-tachometer-alt w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
						<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'Dashboard' %}</span>
					</a>
				</li>
				{% endif %}
				
				<li>
					<a href="{% url 'home' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == hom %}bg-white/30 text-white shadow-lg{% endif %}">
						<i class="fas fa-home w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
						<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'Home' %}</span>
					</a>
				</li>
				
				<li>
					<a href="{% url 'profile' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == prof %}bg-white/30 text-white shadow-lg{% endif %}">
						<i class="fas fa-user w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
						<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'Profile' %}</span>
					</a>
				</li>

				{% if request.user.is_superuser %}
				<li>
					<a href="{% url 'admin_panel' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == admin_p %}bg-white/30 text-white shadow-lg{% endif %}">
						<i class="fas fa-user-tie w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
						<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'Admin Panel' %}</span>
					</a>
				</li>
				<li>
					<a href="{% url 'lecturer_list' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == lec %}bg-white/30 text-white shadow-lg{% endif %}">
						<i class="fas fa-chalkboard-teacher w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
						<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'Lecturers' %}</span>
					</a>
				</li>
				<li>
					<a href="{% url 'student_list' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == stu %}bg-white/30 text-white shadow-lg{% endif %}">
						<i class="fas fa-user-graduate w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
						<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'Students' %}</span>
					</a>
				</li>
				{% endif %}

				{% if request.user.is_instructor_examiner or request.user.is_trainee %}
				<li>
					<a href="{% url 'user_course_list' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == ucl %}bg-white/30 text-white shadow-lg{% endif %}">
						<i class="fas fa-book w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
						<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'My Courses' %}</span>
					</a>
				</li>
				{% endif %}

				{% if request.user.is_superuser or request.user.is_instructor_examiner %}
				<li>
					<a href="{% url 'programs' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == pro %}bg-white/30 text-white shadow-lg{% endif %}">
						<i class="fas fa-book-open w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
						<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'Programs & Courses' %}</span>
					</a>
				</li>
				<li>
					<a href="{% url 'quiz_marking' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == qce %}bg-white/30 text-white shadow-lg{% endif %}">
						<i class="fas fa-check-double w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
						<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'Complete Exams' %}</span>
					</a>
				</li>
				{% endif %}

				{% if request.user.is_superuser %}
				<li>
					<a href="{% url 'quiz_progress' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == qpr %}bg-white/30 text-white shadow-lg{% endif %}">
						<i class="fas fa-record-vinyl w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
						<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'Quiz Progress Rec' %}</span>
					</a>
				</li>
				<li>
					<a href="{% url 'course_allocation_view' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == cav %}bg-white/30 text-white shadow-lg{% endif %}">
						<i class="fas fa-tasks w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
						<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'Course Allocation' %}</span>
					</a>
				</li>
				<li>
					<a href="{% url 'session_list' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == sess %}bg-white/30 text-white shadow-lg{% endif %}">
						<i class="fas fa-calendar-week w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
						<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'Manage Session' %}</span>
					</a>
				</li>
				{% endif %}

				{% if request.user.is_instructor_examiner %}
				<li>
					<a href="{% url 'add_score' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == ascore %}bg-white/30 text-white shadow-lg{% endif %}">
						<i class="fas fa-table w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
						<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'Manage Score' %}</span>
					</a>
				</li>
				{% endif %}

				{% if request.user.is_trainee %}
				<li>
					<a href="{% url 'quiz_progress' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == qpr %}bg-white/30 text-white shadow-lg{% endif %}">
						<i class="fas fa-record-vinyl w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
						<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'Quiz Progress Rec' %}</span>
					</a>
				</li>
				<li>
					<a href="{% url 'grade_results' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == vr %}bg-white/30 text-white shadow-lg{% endif %}">
						<i class="fa fa-spell-check w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
						<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'Grade Results' %}</span>
					</a>
				</li>
				<li>
					<a href="{% url 'ass_results' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == ar %}bg-white/30 text-white shadow-lg{% endif %}">
						<i class="fa fa-list-ol w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
						<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'Assessment Results' %}</span>
					</a>
				</li>
				<li>
					<a href="{% url 'course_registration' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == cr %}bg-white/30 text-white shadow-lg{% endif %}">
						<i class="fas fa-plus w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
						<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'Add' %} &amp; {% trans 'Drop Course' %}</span>
					</a>
				</li>
				{% endif %}
				
				<!-- Others Section -->
				<div class="pt-6">
					<h3 class="px-4 text-xs font-semibold text-gray-600 uppercase tracking-wider mb-3">{% trans 'Others' %}</h3>
					<li>
						<a href="{% url 'edit_profile' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == ep %}bg-white/30 text-white shadow-lg{% endif %}">
							<i class="fas fa-cogs w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
							<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'Account Setting' %}</span>
						</a>
					</li>
					<li>
						<a href="{% url 'change_password' %}" class="flex items-center px-4 py-3 rounded-xl text-gray-800 hover:bg-white/20 hover:text-white transition-all duration-300 group {% if request.path == cp %}bg-white/30 text-white shadow-lg{% endif %}">
							<i class="fas fa-key w-5 h-5 mr-3 group-hover:scale-110 transition-transform text-gray-800 group-hover:text-white"></i>
							<span class="font-medium text-gray-800 group-hover:text-white">{% trans 'Change Password' %}</span>
						</a>
					</li>
				</div>
			</ul>
		</div>
	</div>

	<footer class="mt-8 p-4 border-t border-sky-green-200/30">
		<div class="px-4">
			<form action="{% url 'set_language' %}" method="post" id="lang-form">{% csrf_token %}
				<input name="next" type="hidden" value="{{ redirect_to }}">
				<select class="w-full px-4 py-2 bg-white border border-sky-green-200 rounded-xl text-sm text-gray-700 focus:outline-none focus:ring-2 focus:ring-sky-green-500 focus:border-transparent transition-all duration-200" name="language" id="lang-select">
					{% get_current_language as LANGUAGE_CODE %}
					{% get_available_languages as LANGUAGES %}
					{% get_language_info_list for LANGUAGES as languages %}
					{% for language in languages %}
						<option value="{{ language.code }}"{% if language.code == LANGUAGE_CODE %} selected{% endif %}>
							{{ language.name_local }} ({{ language.code }})
						</option>
					{% endfor %}
				</select>
			</form>
		</div>
	</footer>
</div>

{% comment %} {% block js %}
<script>
	document.getElementById("lang-select").addEventListener("change", function() {
		console.log("Changed!")
    	document.getElementById("lang-form").submit();  // Submit the form programmatically
	});
</script>
{% endblock js %} {% endcomment %}